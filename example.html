
<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Example JavaScript RESTful URL Generator for Amazon's AWS Mechanical Turk Requester API" />
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Example JavaScript RESTful URL Generator for Amazon's AWS Mechanical Turk Requester API</title>
    
    <script src="hmac-sha1.js"></script>  
    <script src="enc-base64-min.js"></script>
    <script src="amt-js-operations.js"></script>
    
    <style type="text/css">
      #signature, #timestamp, #ecsignature, #ectimestamp, #stub_url {
        width: 60%;
      }
      #stub_url {
       height:160px; 
      }
      /*Overwrite width of main content. Default=640px.*/
      #main_content {
       max-width: 800px !important;
      }
      .span_float {
        float:left;
        width:200px;
      }
    </style>
    
    <script type="text/javascript">
    var A = new amt(); // Global
    window.onload = function() {
      // Populate select field
      // This is retrieved from `http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_OperationsArticle.html`.
      // Retrieval date: June 19, 2015.
      var select = document.getElementById('operations');
      for (var i in A.opts) {
        var opt = document.createElement('option');
        opt.innerText = A.opts[i];
        opt.value = A.opts[i];
        select.appendChild(opt);
      }
    }
    function generate_key() {
      var key = document.getElementById('key');
      var operations = document.getElementById('operations');
      var showsg = document.getElementById('signature');
      var showts = document.getElementById('timestamp');
      var ecshowsg = document.getElementById('ecsignature');
      var ecshowts = document.getElementById('ectimestamp');
      var stub_url = document.getElementById('stub_url');
      
      var result = A.generate_signature({
        operation: operations.value,
        secret_key: key.value
      });
      
      showsg.value = result.signature;
      showts.value = result.timestamp;
      ecshowsg.value = result.url_encoded_signature;
      ecshowts.value = result.url_encoded_timestamp;
      stub_url.value = result.stub_url;
    }
    </script>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/their/amt-js-operations">View on GitHub</a>

          <h1 id="project_title">AWS AMT Requester Services URL Generator</h1>
          

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/their/amt-js-operations/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/their/amt-js-operations/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        
        <h3>AWS AMT Requester Services URL Generator</h3>
        
        <p>
        For generating API web requests for requesters on Amazon's AWS Mechanical Turk website.
        Allows the ability to easily call an Amazon Mechanical Turk Requester operation request through a "REST" URL.
        Bypasses the need to use the <a href="http://web.mit.edu/cathywu/Public/AMT/aws-mturk-clt-1.3.0/UserGuide.html">Amazon Mechanical Turk Command Line Tools</a>.
        In addition the URL is created using client-side JavaScript only.
        </p>
        
        <p>
        To create the URL it is only necessary to provide a "signature" argument.
        Generally speaking the signature is the only dynamic portion of most AMT AWS Requester Services requests.
        It is common to create the signature in Java, Python, etc., but of course it is also possible to calculate it using JavaScript.
        According to the AWS documentation the signature is generated in the following manner:
        <code>
A request signature, an HMAC, is calculated by concatenating the values of the Service, Operation, and Timestamp parameters, in that order, and then calculating an RFC 2104-compliant HMAC, using the Secret Access Key as the "key." 
        </code> (<a href="http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMechanicalTurkRequester/MakingRequests_RequestAuthenticationArticle.html">link</a>).
        </p>
        
        </p>The following two libraries provide the functionality required to create an AWS signature:</p>
    		
    		<pre><code>
http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/hmac-sha1.js
http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/enc-base64-min.js
    		</code></pre>
    		
    		<p>To generate an AWS signature using amt-js-operations.js...</p>
    		
        <pre><code style="zoom:1;">
var A = new amt();
var result = A.generate_key({
  operation: operation,
  secret_key: secret_key
});
        </code></pre>
        
        <p>
        <h4>AMT AWS Requester Services URL Generator</h4>
        This tools uses client-side JavaScript only. No external requests are made. No data is passed on to any server.
        No data is saved using cookies.
        <span class="span_float">Operation:</span><select id="operations"></select>
        (<a href="http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_OperationsArticle.html">Operations API Reference</a>)<br />
        <span class="span_float">AWS Requester Secret Key:</span><input type="text" id="key" placeholder="YOURSECRETKEY" /><br />
        <input type="button" value="Generate Signature!" onclick="generate_key();" style="zoom:2;" /><br />
        <h4>Signature & Timestamp:</h4>
        <span class="span_float">Signature:</span><input type="text" id="signature" disabled /><br />
        <span class="span_float">Timestamp:</span><input type="text" id="timestamp" disabled /><br />
        <h4>Signature & Timestamp in URL Encoded Format:</h4>
        <span class="span_float">Signature:</span><input type="text" id="ecsignature" disabled /><br />
        <span class="span_float">Timestamp:</span><input type="text" id="ectimestamp" disabled /><br />
        <h4>Initial URL:</h4>
        <span class="span_float">Initial URL:</span><textarea id="stub_url" disabled /></textarea><br />
        <br />
        For example, to assign a qualification to a worker:</p>
        
        <pre><code style="zoom:1;">
[INITIAL URL FROM ABOVE]
&AWSAccessKeyId=[AWS_REQUESTER_ACCESS_KEY, e.g. 123RVWYBAZW00EXAMPLE]
&QualificationTypeId=[QUALIFICATIONID, e.g. 789RVWYBAZW00EXAMPLE]
&WorkerId=[WORKERID, e.g. AZ3456EXAMPLE]
&IntegerValue=[QUALIFICATION_VALUE, e.g. 90]
&SendNotification=[true|false, Default If Blank=true]
        </code></pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Tools for Amazon's Mechanical Turk maintained by David Shumway and FLBS: <a href="https://github.com/their">their</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
